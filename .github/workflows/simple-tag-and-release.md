# simple-tag-and-release

Reusable GitHub Actions workflow to:

* Create a version tag (e.g. `v1.15.2`)
* Create a GitHub Release
* Update `vMAJOR` (e.g. `v1`) and `latest` tags to the same commit

Useful for releasing:

* GitHub Actions (so consumers can use `v1` / `latest`)
* Any project following semantic versioning

---

## Inputs

### `semver` (required)

Semantic version to release, with or without `v`:

* `1.15.2`
* `v1.15.2`

The workflow normalizes this to `v1.15.2`.

---

## What it does

Given `semver`, the workflow:

1. Normalizes it to `vX.Y.Z`
2. Creates the `vX.Y.Z` tag at the calling commit
3. Creates a GitHub Release for `vX.Y.Z` with autogenerated notes
4. Updates / recreates:

    * `vX` pointing to the same commit
    * `latest` pointing to the same commit
5. On failure or cancellation after creating `vX.Y.Z`, deletes that tag again

---

## Usage

Example in a consuming repository:

```yaml
name: Create release

on:
  workflow_dispatch:
    inputs:
      semver:
        description: "Release version (e.g. 1.15.2 or v1.15.2)"
        required: true
        type: string

jobs:
  release:
    uses: leinardi/gh-reusable-workflows/.github/workflows/simple-tag-and-release.yaml@v1
    with:
      semver: ${{ inputs.semver }}
```

---

## Recommendation

Pin to a major version tag for stability:

```yaml
uses: leinardi/gh-reusable-workflows/.github/workflows/simple-tag-and-release.yaml@v1
```
